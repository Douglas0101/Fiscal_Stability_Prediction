# Dockerfile.mlflow

# A linha ARG foi removida.

FROM python:3.9-slim

WORKDIR /app

RUN apt-get update && apt-get install -y git && \
    pip install mlflow psycopg2-binary

# --- CORREÇÃO FINAL: Fixar (hardcode) os IDs de usuário e grupo ---
RUN groupadd -g 1000 appgroup && \
    useradd --no-log-init -u 1000 -g appgroup -m appuser

USER appuser

EXPOSE 5000
CMD ["mlflow", "server", "--host", "0.0.0.0", "--port", "5000"]