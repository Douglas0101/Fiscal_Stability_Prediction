(rapids-25.06) ~/PycharmProjects/Fiscal_Stability_Prediction git:[master]
docker-compose logs --tail=100 api
WARN[0000] /home/douglas-souza/PycharmProjects/Fiscal_Stability_Prediction/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
fiscal_stability_api  |     return await connect_utils._connect(
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/asyncpg/connect_utils.py", line 1049, in _connect
fiscal_stability_api  |     conn = await _connect_addr(
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/asyncpg/connect_utils.py", line 886, in _connect_addr
fiscal_stability_api  |     return await __connect_addr(params, True, *args)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/asyncpg/connect_utils.py", line 934, in __connect_addr
fiscal_stability_api  |     await connected
fiscal_stability_api  | asyncpg.exceptions.InvalidCatalogNameError: database "fiscal_stability_db" does not exist
fiscal_stability_api  |
fiscal_stability_api  | ERROR:    Application startup failed. Exiting.
fiscal_stability_api  | INFO:     Stopping reloader process [1]
fiscal_stability_api  | INFO:     Will watch for changes in these directories: ['/app']
fiscal_stability_api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
fiscal_stability_api  | INFO:     Started reloader process [1] using StatReload
fiscal_stability_api  | 2025-07-14 03:52:03,769 - src.api - INFO - API iniciando... Conectando à base de dados e carregando modelo de ML.
fiscal_stability_api  | 2025-07-14 03:52:03,770 - src.database - INFO - Tentativa 1/5 de conectar à base de dados...
fiscal_stability_api  | INFO:     Started server process [8]
fiscal_stability_api  | INFO:     Waiting for application startup.
fiscal_stability_api  | 2025-07-14 03:52:03,774 - src.database - WARNING - Falha ao conectar à base de dados na tentativa 1: database "fiscal_stability_db" does not exist
fiscal_stability_api  | 2025-07-14 03:52:03,774 - src.database - INFO - A aguardar 5 segundos antes de tentar novamente...
fiscal_stability_api  | 2025-07-14 03:52:08,779 - src.database - INFO - Tentativa 2/5 de conectar à base de dados...
fiscal_stability_api  | 2025-07-14 03:52:08,788 - src.database - WARNING - Falha ao conectar à base de dados na tentativa 2: database "fiscal_stability_db" does not exist
fiscal_stability_api  | 2025-07-14 03:52:08,788 - src.database - INFO - A aguardar 5 segundos antes de tentar novamente...
fiscal_stability_api  | 2025-07-14 03:52:13,793 - src.database - INFO - Tentativa 3/5 de conectar à base de dados...
fiscal_stability_api  | 2025-07-14 03:52:13,799 - src.database - WARNING - Falha ao conectar à base de dados na tentativa 3: database "fiscal_stability_db" does not exist
fiscal_stability_api  | 2025-07-14 03:52:13,799 - src.database - INFO - A aguardar 5 segundos antes de tentar novamente...
fiscal_stability_api  | 2025-07-14 03:52:18,804 - src.database - INFO - Tentativa 4/5 de conectar à base de dados...
fiscal_stability_api  | 2025-07-14 03:52:18,812 - src.database - WARNING - Falha ao conectar à base de dados na tentativa 4: database "fiscal_stability_db" does not exist
fiscal_stability_api  | 2025-07-14 03:52:18,812 - src.database - INFO - A aguardar 5 segundos antes de tentar novamente...
fiscal_stability_api  | 2025-07-14 03:52:23,816 - src.database - INFO - Tentativa 5/5 de conectar à base de dados...
fiscal_stability_api  | 2025-07-14 03:52:23,824 - src.database - WARNING - Falha ao conectar à base de dados na tentativa 5: database "fiscal_stability_db" does not exist
fiscal_stability_api  | 2025-07-14 03:52:23,824 - src.database - ERROR - Não foi possível estabelecer conexão com a base de dados após várias tentativas.
fiscal_stability_api  | ERROR:    Traceback (most recent call last):
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 694, in lifespan
fiscal_stability_api  |     async with self.lifespan_context(app) as maybe_state:
fiscal_stability_api  |   File "/usr/local/lib/python3.10/contextlib.py", line 199, in __aenter__
fiscal_stability_api  |     return await anext(self.gen)
fiscal_stability_api  |   File "/app/src/api.py", line 55, in lifespan
fiscal_stability_api  |     await create_db_and_tables()
fiscal_stability_api  |   File "/app/src/database.py", line 27, in create_db_and_tables
fiscal_stability_api  |     async with engine.begin() as conn:
fiscal_stability_api  |   File "/usr/local/lib/python3.10/contextlib.py", line 199, in __aenter__
fiscal_stability_api  |     return await anext(self.gen)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/engine.py", line 1066, in begin
fiscal_stability_api  |     async with conn:
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/base.py", line 121, in __aenter__
fiscal_stability_api  |     return await self.start(is_ctxmanager=True)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/engine.py", line 274, in start
fiscal_stability_api  |     await greenlet_spawn(self.sync_engine.connect)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
fiscal_stability_api  |     result = context.throw(*sys.exc_info())
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3273, in connect
fiscal_stability_api  |     return self._connection_cls(self)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
fiscal_stability_api  |     self._dbapi_connection = engine.raw_connection()
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 3297, in raw_connection
fiscal_stability_api  |     return self.pool.connect()
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 449, in connect
fiscal_stability_api  |     return _ConnectionFairy._checkout(self)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
fiscal_stability_api  |     fairy = _ConnectionRecord.checkout(pool)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 713, in checkout
fiscal_stability_api  |     rec = pool._do_get()
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
fiscal_stability_api  |     with util.safe_reraise():
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
fiscal_stability_api  |     raise exc_value.with_traceback(exc_tb)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
fiscal_stability_api  |     return self._create_connection()
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
fiscal_stability_api  |     return _ConnectionRecord(self)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 675, in __init__
fiscal_stability_api  |     self.__connect()
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 901, in __connect
fiscal_stability_api  |     with util.safe_reraise():
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
fiscal_stability_api  |     raise exc_value.with_traceback(exc_tb)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/pool/base.py", line 897, in __connect
fiscal_stability_api  |     self.dbapi_connection = connection = pool._invoke_creator(self)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/create.py", line 646, in connect
fiscal_stability_api  |     return dialect.connect(*cargs, **cparams)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 625, in connect
fiscal_stability_api  |     return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 961, in connect
fiscal_stability_api  |     await_only(creator_fn(*arg, **kw)),
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
fiscal_stability_api  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
fiscal_stability_api  |     value = await result
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/asyncpg/connection.py", line 2421, in connect
fiscal_stability_api  |     return await connect_utils._connect(
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/asyncpg/connect_utils.py", line 1049, in _connect
fiscal_stability_api  |     conn = await _connect_addr(
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/asyncpg/connect_utils.py", line 886, in _connect_addr
fiscal_stability_api  |     return await __connect_addr(params, True, *args)
fiscal_stability_api  |   File "/usr/local/lib/python3.10/site-packages/asyncpg/connect_utils.py", line 934, in __connect_addr
fiscal_stability_api  |     await connected
fiscal_stability_api  | asyncpg.exceptions.InvalidCatalogNameError: database "fiscal_stability_db" does not exist
fiscal_stability_api  |
fiscal_stability_api  | ERROR:    Application startup failed. Exiting.